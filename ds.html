<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Polynomial Calculator with Steps + Value Evaluation</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  background: linear-gradient(to right,#4facfe,#00f2fe);
  min-height: 100vh;
  margin: 0;
  padding: 20px;
  font-family: Arial, sans-serif;
}

.wrapper {
  display:flex;
  gap:20px;
  width:100%;
  max-width:1200px;
  margin:auto;
}

.panel,.steps-panel,.c-panel {
  background:white;
  border-radius:12px;
  padding:20px;
  box-shadow:0 10px 25px rgba(0,0,0,0.2);
}

.panel { width:45%; }
.steps-panel { width:55%; max-height:80vh; overflow:auto; }

h2,h3 { color:#2c3e50 }

input {
  width:100%;
  padding:10px;
  border-radius:8px;
  border:1px solid #ccc;
  font-family: monospace;
}

label { margin-top:10px; display:block; font-weight:bold }

button {
  width:48%;
  padding:12px;
  border:none;
  border-radius:8px;
  color:white;
  font-weight:bold;
  cursor:pointer;
}

.add { background:#667eea }
.sub { background:#f5576c }

.result {
  background:#f1fefe;
  padding:10px;
  margin-top:15px;
  border-radius:8px;
  font-family:monospace;
  font-size:18px;
}

.step {
  background:#f7fbff;
  padding:12px;
  margin-bottom:10px;
  border-left:5px solid #667eea;
  border-radius:8px;
}

pre {
  background:#1e1e1e;
  color:#d4d4d4;
  padding:15px;
  overflow:auto;
  border-radius:10px;
  font-size:14px;
}
</style>
</head>

<body>

<div class="wrapper">

<!-- LEFT PANEL -->
<div class="panel">
<h2>Polynomial Calculator</h2>

<label>Polynomial 1</label>
<input id="p1" value="4x^2 + 3x - 5">

<label>Polynomial 2</label>
<input id="p2" value="2x^2 - x + 10">

<label>Assign Variable Values</label>
<input id="values" placeholder="x=2">

<div style="margin-top:15px; display:flex; justify-content:space-between;">
<button class="add" onclick="solve('add')">+ Add</button>
<button class="sub" onclick="solve('sub')">- Subtract</button>
</div>

<div class="result">
<b>Symbolic Result:</b><br>
<span id="symbolic">—</span><br><br>
<b>Final Numeric Value:</b><br>
<span id="numeric">—</span>
</div>
</div>

<!-- RIGHT PANEL -->
<div class="steps-panel">
<h3>Step-by-Step Visualization</h3>
<div id="steps">
  <div class="step">Enter polynomials and click Add or Subtract</div>
</div>
</div>

</div>

<!-- ===================== C CODE PANEL ===================== -->
<div class="c-panel" style="margin-top:30px; max-width:1200px; margin-left:auto; margin-right:auto;">
<h3>C Program (Polynomial Addition / Subtraction)</h3>

<pre><code>
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;math.h&gt;

struct poly {
    int coeff;
    int power;
    struct poly *next;
};

typedef struct poly node;

node* createNode(int c, int p) {
    node* nn = (node*)malloc(sizeof(node));
    nn->coeff = c;
    nn->power = p;
    nn->next = NULL;
    return nn;
}

node* insert(node* head, int c, int p) {
    if(c == 0) return head;
    node* temp = createNode(c, p);

    if(head == NULL || p > head->power) {
        temp->next = head;
        return temp;
    }

    node* cur = head;
    while(cur->next && cur->next->power > p)
        cur = cur->next;

    if(cur->next && cur->next->power == p) {
        cur->next->coeff += c;
        free(temp);
    } else {
        temp->next = cur->next;
        cur->next = temp;
    }
    return head;
}

void display(node* head) {
    while(head) {
        if(head->coeff > 0) printf(" + ");
        printf("%dx^%d", head->coeff, head->power);
        head = head->next;
    }
    printf("\\n");
}

node* operate(node* p1, node* p2, int sign) {
    node* result = NULL;
    while(p1) {
        result = insert(result, p1->coeff, p1->power);
        p1 = p1->next;
    }
    while(p2) {
        result = insert(result, sign * p2->coeff, p2->power);
        p2 = p2->next;
    }
    return result;
}

int evaluate(node* head, int x) {
    int sum = 0;
    while(head) {
        sum += head->coeff * pow(x, head->power);
        head = head->next;
    }
    return sum;
}

int main() {
    node *p1=NULL, *p2=NULL, *res=NULL;
    int ch, x;

    p1 = insert(p1, 4, 2);
    p1 = insert(p1, 3, 1);
    p1 = insert(p1, -5, 0);

    p2 = insert(p2, 2, 2);
    p2 = insert(p2, -1, 1);
    p2 = insert(p2, 10, 0);

    printf("1.Addition  2.Subtraction: ");
    scanf("%d",&ch);

    res = (ch==1)? operate(p1,p2,1): operate(p1,p2,-1);

    printf("Enter x: ");
    scanf("%d",&x);

    printf("Result = %d", evaluate(res,x));
}
</code></pre>
</div>

<script>
function parsePolynomial(str){
  let terms = {};
  str = str.replace(/\s+/g,'');
  let parts = str.split(/(?=[+-])/);

  parts.forEach(part=>{
    if(!part) return;
    let coef = part.match(/^([+-]?\d*)/)[1];
    coef = coef==""||coef=="+"?1:coef=="-"?-1:parseInt(coef);

    let vars = part.match(/[a-z]\^?\d*/g)||[];
    let key = vars.length?vars.join("*"):"const";
    terms[key]=(terms[key]||0)+coef;
  });
  return terms;
}

function format(terms){
  let out="";
  for(let k in terms){
    let c=terms[k];
    if(c==0) continue;
    out += (c>0 && out?" + ":"") + (k=="const"?c:(c==1?"":c)+k.replace("*",""));
  }
  return out||"0";
}

function evaluate(poly,values){
  let sum=0;
  for(let k in poly){
    let v=poly[k];
    if(k=="const"){ sum+=v; continue; }
    let val=v;
    k.split("*").forEach(t=>{
      let [x,p]=t.split("^");
      val*=Math.pow(values[x]||0,p?parseInt(p):1);
    });
    sum+=val;
  }
  return sum;
}

function solve(type){
  let p1=document.getElementById("p1").value.trim();
  let p2=document.getElementById("p2").value.trim();
  let vals=document.getElementById("values").value.trim();
  let steps=document.getElementById("steps");
  steps.innerHTML="";

  if(!p1||!p2||p1=="0"||p2=="0"){
    document.getElementById("symbolic").innerText="Invalid Input";
    document.getElementById("numeric").innerText="Invalid Input";
    steps.innerHTML="<div class='step'><b>Error:</b> Polynomial cannot be empty or zero.</div>";
    return;
  }

  let t1=parsePolynomial(p1), t2=parsePolynomial(p2), res={};
  let all=new Set([...Object.keys(t1),...Object.keys(t2)]);

  all.forEach(k=>{
    res[k]=type=="add"?(t1[k]||0)+(t2[k]||0):(t1[k]||0)-(t2[k]||0);
    steps.innerHTML+=`<div class='step'>${k}: ${res[k]}</div>`;
  });

  document.getElementById("symbolic").innerText=format(res);

  let values={};
  vals.split(",").forEach(p=>{
    let [k,v]=p.split("=");
    if(k&&v) values[k.trim()]=parseFloat(v);
  });

  document.getElementById("numeric").innerText=evaluate(res,values);
}
</script>

</body>
</html>
